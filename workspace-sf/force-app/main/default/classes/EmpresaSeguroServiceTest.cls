/**
 * Classe de teste Servi√ßos do objeto Account para Empresas de Seguro da Cia
 * @author Fernando Barcellos @ 06/04/2018
 *
 **/
@isTest
private class EmpresaSeguroServiceTest {
	@testSetup
	static void setup() {
		Id tipoPessoaJuridica = RecordTypeBO.buscarTipoRegistro('Account', 'PessoaJuridica').Id;

		List<Account> contas = new List<Account>();
		for (Integer i = 0; i < 1; i++) {
			 // PLV-4472 INICIO
			contas.add(new Account(RecordTypeId = tipoPessoaJuridica, Cnpj__c = '38.579.897/0001-22', Name = 'Conta ' + i, CodigoEmpresa__c = String.valueOf(i)));
			// PLV-4472 FIM
		}
		insert contas;

		//Account contaTeste = [SELECT Id FROM Account WHERE CodigoEmpresa__c = '1' LIMIT 1];

		Integracao__c integracao = new Integracao__c();
		integracao.Name = 'Empresas de seguro';
		integracao.DeveloperName__c = 'Account';
		integracao.UltimaExecucao__c = System.today();
		insert integracao;
	}

	@isTest
	static void testeSincronizarEmpresaSeguro() {
		String responseJsonString = '{"LotusEmpresaSeguroDBOutput":[{"codigoEmpresa":1,"nomeEmpresa":"PORTO SEGURO CIA DE SEGUROS GERAIS      ","numeroCpfCnpj":"61198164","ordem":"1","digitoCpfCnpj":"60","siglaEmpresa":"PORTO SEGURO        ","codigoPlanoContaContabil":93,"tipoLivroDiario":"L","numeroInscricaoEstadual":"108377122112   "},{"codigoEmpresa":2,"nomeEmpresa":"SPECTRA ASSESSORIA DE VENDAS S/C LTDA   ","numeroCpfCnpj":"51193936","ordem":"1","digitoCpfCnpj":"17","siglaEmpresa":"SPECTRA             ","codigoPlanoContaContabil":2,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":5,"nomeEmpresa":"REPLACE ADMINISTRACAO DE SALVADOS SC LTD","numeroCpfCnpj":"54458765","ordem":"1","digitoCpfCnpj":"7","siglaEmpresa":"REPLACE             ","codigoPlanoContaContabil":5,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":6,"nomeEmpresa":"FAZENDA PERIQUITOS CIA AGROPECUARIA     ","numeroCpfCnpj":"49934458","ordem":"1","digitoCpfCnpj":"7","siglaEmpresa":"FAZENDA PERIQUITOS  ","codigoPlanoContaContabil":6,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":7,"nomeEmpresa":"PORTO SEGURO FACTORING LTDA             ","numeroCpfCnpj":"60708591","ordem":"1","digitoCpfCnpj":"88","siglaEmpresa":"FACTORING           ","codigoPlanoContaContabil":7,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":8,"nomeEmpresa":"PORTO SEGURO VEIC. PECAS E SERVICOS LTDA","numeroCpfCnpj":"44936086","ordem":"1","digitoCpfCnpj":"34","siglaEmpresa":"SERVICOS (VEICULOS) ","codigoPlanoContaContabil":8,"tipoLivroDiario":"L","numeroInscricaoEstadual":"112887265112   "},{"codigoEmpresa":10,"nomeEmpresa":"CENTRAL DE VEICULOS S/A                 ","numeroCpfCnpj":"61799169","ordem":"1","digitoCpfCnpj":"48","siglaEmpresa":"CENTRAL             ","codigoPlanoContaContabil":10,"tipoLivroDiario":"L","numeroInscricaoEstadual":"NAO CADASTRADO "},{"codigoEmpresa":11,"nomeEmpresa":"GUAPORE VEICULOS E AUTO PECAS S/A       ","numeroCpfCnpj":"61998456","ordem":"1","digitoCpfCnpj":"87","siglaEmpresa":"GUAPORE             ","codigoPlanoContaContabil":11,"tipoLivroDiario":"L","numeroInscricaoEstadual":"04956980118    "},{"codigoEmpresa":12,"nomeEmpresa":"PORTO SEGURO ADM. DE CONSORCIOS LTDA    ","numeroCpfCnpj":"48041735","ordem":"1","digitoCpfCnpj":"90","siglaEmpresa":"PORTO CONSORCIO     ","codigoPlanoContaContabil":12,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":13,"nomeEmpresa":"PORTO SEGURO INVEST. E PARTICIPACOES S/A","numeroCpfCnpj":"53227112","ordem":"1","digitoCpfCnpj":"46","siglaEmpresa":"INVESTIMENTOS       ","codigoPlanoContaContabil":13,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":14,"nomeEmpresa":"PORTO SEGURO VIDA E PREVIDENCIA S/A     ","numeroCpfCnpj":"58768284","ordem":"1","digitoCpfCnpj":"40","siglaEmpresa":"PORTO PREVIDENCIA   ","codigoPlanoContaContabil":96,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":15,"nomeEmpresa":"CV - VEICULOS E AUTO PECAS S. A.        ","numeroCpfCnpj":"63075329","ordem":"1","digitoCpfCnpj":"31","siglaEmpresa":"CV                  ","codigoPlanoContaContabil":15,"tipoLivroDiario":"L","numeroInscricaoEstadual":"108.515.872.113"},{"codigoEmpresa":9,"nomeEmpresa":"LERMA S/A INDUSTRIA E COMERCIO          ","numeroCpfCnpj":"60781853","ordem":"1","digitoCpfCnpj":"30","siglaEmpresa":"LERMA               ","codigoPlanoContaContabil":9,"tipoLivroDiario":"L","numeroInscricaoEstadual":"?              "},{"codigoEmpresa":72,"nomeEmpresa":"ROSAI EMPREEND. PARTICIPACOES S/A       ","numeroCpfCnpj":"59884403","ordem":"1","digitoCpfCnpj":"93","siglaEmpresa":"ROSAI               ","codigoPlanoContaContabil":72,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":51,"nomeEmpresa":"PORTO SEGURO CIA. SEGUROS GERAIS - VITAL","numeroCpfCnpj":"62639562","ordem":"1","digitoCpfCnpj":null,"siglaEmpresa":"CLUBE VITAL         ","codigoPlanoContaContabil":null,"tipoLivroDiario":null,"numeroInscricaoEstadual":null},{"codigoEmpresa":70,"nomeEmpresa":"ROSAG EMPREEND. E PARTICIPACOES S/A     ","numeroCpfCnpj":"59884445","ordem":"1","digitoCpfCnpj":"24","siglaEmpresa":"ROSAG               ","codigoPlanoContaContabil":70,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":16,"nomeEmpresa":"SEVEPE SERVICOS VEICULOS E PECAS LTDA   ","numeroCpfCnpj":"62486022","ordem":"1","digitoCpfCnpj":"60","siglaEmpresa":"SEVEPE              ","codigoPlanoContaContabil":16,"tipoLivroDiario":"L","numeroInscricaoEstadual":"108133998119   "},{"codigoEmpresa":17,"nomeEmpresa":"VIDA SEGURA CORRETORA DE SEGUROS S/C LTD","numeroCpfCnpj":"68472307","ordem":"1","digitoCpfCnpj":"29","siglaEmpresa":"VIDA SEGURA         ","codigoPlanoContaContabil":17,"tipoLivroDiario":"L","numeroInscricaoEstadual":"?              "},{"codigoEmpresa":18,"nomeEmpresa":"PREVISA-SUL CORRETORA DE SEGUROS S/C LTD","numeroCpfCnpj":"68470632","ordem":"1","digitoCpfCnpj":"52","siglaEmpresa":"PREVISA             ","codigoPlanoContaContabil":18,"tipoLivroDiario":"L","numeroInscricaoEstadual":"?              "},{"codigoEmpresa":71,"nomeEmpresa":"ROSAS EMPREEND. E PARTICIPACOES S/A     ","numeroCpfCnpj":"59867234","ordem":"1","digitoCpfCnpj":"83","siglaEmpresa":"ROSAS               ","codigoPlanoContaContabil":71,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":20,"nomeEmpresa":"PORTOPREV - PORTO SEGURO PREVID.PRIVADA ","numeroCpfCnpj":"107852","ordem":"1","digitoCpfCnpj":"82","siglaEmpresa":"PORTOPREV           ","codigoPlanoContaContabil":20,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":53,"nomeEmpresa":"ITAMARATI  CLUBE VIDA                   ","numeroCpfCnpj":null,"ordem":null,"digitoCpfCnpj":null,"siglaEmpresa":"CLUBE PORTO         ","codigoPlanoContaContabil":null,"tipoLivroDiario":null,"numeroInscricaoEstadual":null},{"codigoEmpresa":21,"nomeEmpresa":"MEDPREV CORRETORA DE SEGUROS S/C LTDA   ","numeroCpfCnpj":"610285","ordem":"1","digitoCpfCnpj":"82","siglaEmpresa":"MEDPREV             ","codigoPlanoContaContabil":21,"tipoLivroDiario":"L","numeroInscricaoEstadual":"?              "},{"codigoEmpresa":73,"nomeEmpresa":"PARES EMPREENDIMENTOS E PARTICIP S/C LTD","numeroCpfCnpj":"43761758","ordem":"1","digitoCpfCnpj":"55","siglaEmpresa":"PARES               ","codigoPlanoContaContabil":null,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":22,"nomeEmpresa":"PORTO SEGURO SERVICOS MEDICOS LTDA      ","numeroCpfCnpj":"1473781","ordem":"1","digitoCpfCnpj":"2","siglaEmpresa":"PORTOMED            ","codigoPlanoContaContabil":22,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":52,"nomeEmpresa":"PORTO SEGURO CIA. SEGUROS GERAIS - CLUBE","numeroCpfCnpj":"62639563","ordem":null,"digitoCpfCnpj":null,"siglaEmpresa":"CLUBE ITAMARATI     ","codigoPlanoContaContabil":null,"tipoLivroDiario":null,"numeroInscricaoEstadual":null},{"codigoEmpresa":24,"nomeEmpresa":"PORTOPAR DISTRIB.DE TIT.VAL.MOBIL.LTDA  ","numeroCpfCnpj":"40303299","ordem":"1","digitoCpfCnpj":"78","siglaEmpresa":"PORTOPAR            ","codigoPlanoContaContabil":24,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":25,"nomeEmpresa":"CLUBE PORTO SEGURO ADM E SERVICOS LTDA  ","numeroCpfCnpj":"454799","ordem":"1","digitoCpfCnpj":"96","siglaEmpresa":"CLUBE PORTO SEGURO  ","codigoPlanoContaContabil":25,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTO         "},{"codigoEmpresa":74,"nomeEmpresa":"AVENCA ASSESSORIA E PARTICIPACOES S/C LT","numeroCpfCnpj":"51447241","ordem":"1","digitoCpfCnpj":"14","siglaEmpresa":"AVENCA              ","codigoPlanoContaContabil":74,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":26,"nomeEmpresa":"PORTO SEGURO S/A                        ","numeroCpfCnpj":"2149205","ordem":"1","digitoCpfCnpj":"69","siglaEmpresa":"PORTO S/A           ","codigoPlanoContaContabil":86,"tipoLivroDiario":"L","numeroInscricaoEstadual":"353000151666   "},{"codigoEmpresa":75,"nomeEmpresa":"ALMEIDA BARONE CORRETORA SEGUROS SC LTDA","numeroCpfCnpj":"63106694","ordem":"1","digitoCpfCnpj":"66","siglaEmpresa":"ALMEIDA BARONE      ","codigoPlanoContaContabil":75,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":76,"nomeEmpresa":"CASTA SERVICOS TECNICOS S/C LTDA        ","numeroCpfCnpj":"48086052","ordem":"1","digitoCpfCnpj":"59","siglaEmpresa":"CASTA               ","codigoPlanoContaContabil":76,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":27,"nomeEmpresa":"PORTO SEGURO PROTECAO E MONIT. LTDA     ","numeroCpfCnpj":"2340041","ordem":"1","digitoCpfCnpj":"52","siglaEmpresa":"PSEGURO PROT PATRIM ","codigoPlanoContaContabil":27,"tipoLivroDiario":"L","numeroInscricaoEstadual":"206100392118   "},{"codigoEmpresa":28,"nomeEmpresa":"PORTO SEGURO ADM. RECURSOS PORTOPAR LTDA","numeroCpfCnpj":"1658352","ordem":"1","digitoCpfCnpj":"0","siglaEmpresa":"PORTOPAR ADM        ","codigoPlanoContaContabil":28,"tipoLivroDiario":"L","numeroInscricaoEstadual":"35214210307    "},{"codigoEmpresa":29,"nomeEmpresa":"ASSOCIACAO CRESCER SEMPRE               ","numeroCpfCnpj":"2537472","ordem":"1","digitoCpfCnpj":"3","siglaEmpresa":"CRESCER SEMPRE      ","codigoPlanoContaContabil":29,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":77,"nomeEmpresa":"ALTERTHUM CORRETORA DE SEGUROS S/C LTDA ","numeroCpfCnpj":"61525911","ordem":"1","digitoCpfCnpj":"27","siglaEmpresa":"ALTERTHUM           ","codigoPlanoContaContabil":77,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":78,"nomeEmpresa":"FORSEG CORRETORA DE SEGUROS S/C LTDA    ","numeroCpfCnpj":"31602790","ordem":"1","digitoCpfCnpj":"9","siglaEmpresa":"FORSEG              ","codigoPlanoContaContabil":78,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":30,"nomeEmpresa":"PORTO SEGURO SAUDE ASSISTENC. MEDICA S/A","numeroCpfCnpj":"3496381","ordem":"1","digitoCpfCnpj":"30","siglaEmpresa":"PORTO SEGURO SAUDE  ","codigoPlanoContaContabil":30,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":60,"nomeEmpresa":"PORTO SEGURO ECOLOGIA S/C LTDA          ","numeroCpfCnpj":"3511374","ordem":"1","digitoCpfCnpj":"60","siglaEmpresa":"ECOLOGIA            ","codigoPlanoContaContabil":null,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":79,"nomeEmpresa":"ALMEIDA VIEIRA ADM CORRET SEGS S/C LTDA ","numeroCpfCnpj":"48073027","ordem":"1","digitoCpfCnpj":"30","siglaEmpresa":"ALMEIDA VIEIRA      ","codigoPlanoContaContabil":79,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":80,"nomeEmpresa":"SEGURAUTO ADM CORRET SEGS S/C LTDA      ","numeroCpfCnpj":"50586502","ordem":"1","digitoCpfCnpj":"14","siglaEmpresa":"SEGURAUTO           ","codigoPlanoContaContabil":80,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":81,"nomeEmpresa":"ROSSEG ADM CORRETORA DE SEGS S/C LTDA   ","numeroCpfCnpj":"47467659","ordem":"1","digitoCpfCnpj":"16","siglaEmpresa":"ROSSEG              ","codigoPlanoContaContabil":81,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":82,"nomeEmpresa":"LIBOR SERVICOS TECNICOS S/C LTDA        ","numeroCpfCnpj":"31602740","ordem":"1","digitoCpfCnpj":"76","siglaEmpresa":"LIBOR               ","codigoPlanoContaContabil":82,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":99,"nomeEmpresa":"PORTO SEGURO SAUDE -- TESTE             ","numeroCpfCnpj":"9","ordem":"8","digitoCpfCnpj":"7","siglaEmpresa":"PORTO SAUDE -- TESTE","codigoPlanoContaContabil":null,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":40,"nomeEmpresa":"PORTOSEG S/A - CREDITO FINANC E INVEST  ","numeroCpfCnpj":"4862600","ordem":"1","digitoCpfCnpj":"10","siglaEmpresa":"PORTOSEG S/A        ","codigoPlanoContaContabil":40,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":50,"nomeEmpresa":"PORTO SEGURO - SEGURO SAUDE S.A.        ","numeroCpfCnpj":"4540010","ordem":"1","digitoCpfCnpj":"70","siglaEmpresa":"PORTO SAUDE         ","codigoPlanoContaContabil":53,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":36,"nomeEmpresa":"FAZENDA PERIQUITOS CIA AGROPECUARIA     ","numeroCpfCnpj":"1049934458","ordem":"1","digitoCpfCnpj":"7","siglaEmpresa":"FAZENDA PERIQUITOS  ","codigoPlanoContaContabil":36,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":55,"nomeEmpresa":"INSTITUTO PORTO SEGURO                  ","numeroCpfCnpj":"6864650","ordem":"1","digitoCpfCnpj":"61","siglaEmpresa":"INSTITUTO PORTO     ","codigoPlanoContaContabil":55,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":35,"nomeEmpresa":"AZUL COMPANHIA DE SEGUROS GERAIS        ","numeroCpfCnpj":"33448150","ordem":"1","digitoCpfCnpj":"11","siglaEmpresa":"AZUL SEGUROS        ","codigoPlanoContaContabil":35,"tipoLivroDiario":"L","numeroInscricaoEstadual":"81165688       "},{"codigoEmpresa":83,"nomeEmpresa":"FRANCO S/A CORRETAGEM DE SEGUROS        ","numeroCpfCnpj":"33061136","ordem":"1","digitoCpfCnpj":"60","siglaEmpresa":"FRANCO CORRETORA    ","codigoPlanoContaContabil":83,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":41,"nomeEmpresa":"CREDIPORTO PROMOTORA DE SERVICOS LTDA   ","numeroCpfCnpj":"8504728","ordem":"1","digitoCpfCnpj":"62","siglaEmpresa":"CREDIPORTO          ","codigoPlanoContaContabil":41,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":44,"nomeEmpresa":"PORTO SEGURO ATENDIMENTO S/A            ","numeroCpfCnpj":"10734806","ordem":"1","digitoCpfCnpj":"67","siglaEmpresa":"PSA                 ","codigoPlanoContaContabil":43,"tipoLivroDiario":"L","numeroInscricaoEstadual":"39014703       "},{"codigoEmpresa":84,"nomeEmpresa":"ITAU SEGUROS DE AUTO E RESIDENCIA       ","numeroCpfCnpj":"8816067","ordem":"1","digitoCpfCnpj":"0","siglaEmpresa":"ITAU FROTA E RESIDE.","codigoPlanoContaContabil":84,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":31,"nomeEmpresa":"PORTOMED-PORTO SEGURO SERV. DE SAUDE S.A","numeroCpfCnpj":"11565995","ordem":"1","digitoCpfCnpj":"54","siglaEmpresa":"PORTOMED-SERV SAUDE ","codigoPlanoContaContabil":53,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":85,"nomeEmpresa":"PORTO SEGURO TELECOMUNICACOES S.A.      ","numeroCpfCnpj":"11281004","ordem":"1","digitoCpfCnpj":"1","siglaEmpresa":"PORTO SEGURO TELECOM","codigoPlanoContaContabil":85,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":32,"nomeEmpresa":"PORTO SEGURO SERVICOS ODONTOLOGICOS S.A.","numeroCpfCnpj":"13991711","ordem":"1","digitoCpfCnpj":"17","siglaEmpresa":"PORTO SEGURO ODONTO ","codigoPlanoContaContabil":53,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTO         "},{"codigoEmpresa":86,"nomeEmpresa":"FUNDACAO SAUDE ITAU                     ","numeroCpfCnpj":"73809352","ordem":"1","digitoCpfCnpj":"66","siglaEmpresa":"FUNDACAO SAUDE ITAU ","codigoPlanoContaContabil":22,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":37,"nomeEmpresa":"PORTO SEGURO CAPITALIZACAO S.A.         ","numeroCpfCnpj":"16551758","ordem":"1","digitoCpfCnpj":"58","siglaEmpresa":"PORTOCAP            ","codigoPlanoContaContabil":93,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":38,"nomeEmpresa":"PORTO SEGURO SERV DE GER DE INFORM S.A  ","numeroCpfCnpj":"15618813","ordem":"1","digitoCpfCnpj":"17","siglaEmpresa":"CONECTA SERVICOS    ","codigoPlanoContaContabil":85,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":33,"nomeEmpresa":"PORTO SEGURO INVESTIMENTOS LTDA         ","numeroCpfCnpj":"16492391","ordem":"1","digitoCpfCnpj":"49","siglaEmpresa":"PORTO SEG INVESTIM  ","codigoPlanoContaContabil":33,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":87,"nomeEmpresa":"PORTO SEGURO-BIOQUALYNET S. OCUPAC. LTDA","numeroCpfCnpj":"568696","ordem":"1","digitoCpfCnpj":"57","siglaEmpresa":"BIOQUALYNET         ","codigoPlanoContaContabil":87,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":88,"nomeEmpresa":"BIOQUALYNET SUL SAUDE OCUP E SEG TRAB LT","numeroCpfCnpj":"10483745","ordem":"1","digitoCpfCnpj":"2","siglaEmpresa":"BIOSUL              ","codigoPlanoContaContabil":87,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":89,"nomeEmpresa":"PORTO SEGURO SERVICOS LTDA              ","numeroCpfCnpj":"17934637","ordem":"1","digitoCpfCnpj":"58","siglaEmpresa":"PORTO SERVICOS      ","codigoPlanoContaContabil":89,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":42,"nomeEmpresa":"PORTO SEGURO LOCADORA DE VEICULOS LTDA  ","numeroCpfCnpj":"19091996","ordem":"1","digitoCpfCnpj":"16","siglaEmpresa":"PORTO SEGURO LOCADOR","codigoPlanoContaContabil":42,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":45,"nomeEmpresa":"PORTO SEGURO PARTICIPACOES LTDA         ","numeroCpfCnpj":"19100352","ordem":"1","digitoCpfCnpj":"47","siglaEmpresa":"PORTO PARTICIPACOES ","codigoPlanoContaContabil":45,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":43,"nomeEmpresa":"PORTO SEGURO SERV E COM S/A             ","numeroCpfCnpj":"9436686","ordem":"1","digitoCpfCnpj":"32","siglaEmpresa":"PORTO SERVICOS      ","codigoPlanoContaContabil":43,"tipoLivroDiario":"L","numeroInscricaoEstadual":"37429590       "},{"codigoEmpresa":3,"nomeEmpresa":"PORTO SEGURO RENOVA - SERV E COM LTDA   ","numeroCpfCnpj":"51216125","ordem":"1","digitoCpfCnpj":"94","siglaEmpresa":"PORTOSERV           ","codigoPlanoContaContabil":3,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":19,"nomeEmpresa":"PORTO SEGURO ADM CARTOES CREDITO SC LTDA","numeroCpfCnpj":"69103604","ordem":"1","digitoCpfCnpj":"60","siglaEmpresa":"PORTOCARD           ","codigoPlanoContaContabil":19,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":23,"nomeEmpresa":"PORTO SEGURO EMPREENDIMENTOS S/A.       ","numeroCpfCnpj":"1394199","ordem":"1","digitoCpfCnpj":"42","siglaEmpresa":"PORTO EMPREEND.     ","codigoPlanoContaContabil":23,"tipoLivroDiario":"L","numeroInscricaoEstadual":"ISENTA         "},{"codigoEmpresa":4,"nomeEmpresa":"PORTO SEGURO RENOVA - SERV E COM LTDA   ","numeroCpfCnpj":"22128773","ordem":"1","digitoCpfCnpj":"90","siglaEmpresa":"PORTOSERV           ","codigoPlanoContaContabil":3,"tipoLivroDiario":"L","numeroInscricaoEstadual":null},{"codigoEmpresa":61,"nomeEmpresa":"HEALTH FOR PET                          ","numeroCpfCnpj":"20001161","ordem":"1","digitoCpfCnpj":"7","siglaEmpresa":"HEALTH FOR PET      ","codigoPlanoContaContabil":61,"tipoLivroDiario":"L","numeroInscricaoEstadual":null}]}';

		Test.setMock(HttpCalloutMock.class, new MockHttpResponse(responseJsonString, 200, 'OK'));
		Test.startTest();

		String nomeObjeto = Account.sObjectType.getDescribe().getName();
		IntegracaoBO.getInstance().executarIntegracao(nomeObjeto);
		Integracao__c integracao = [SELECT Id, Name, UltimaExecucao__c FROM Integracao__c WHERE DeveloperName__c =: nomeObjeto LIMIT 1];
		Test.stopTest();

		List<Account> empresas = [SELECT Id, Name, CodigoEmpresa__c, NumeroInscricao__c, Cnpj__c, RecordType.DeveloperName FROM Account];

		if (empresas.size() > 0) {
			for (Account empresa : empresas) {
				System.debug('::: Name: ' + empresa.Name);
				System.debug('::: CodigoEmpresa__c: ' + empresa.CodigoEmpresa__c);
				System.debug('::: Cnpj__c: ' + empresa.Cnpj__c);
				System.debug('------------------------------------------------------------');
			}
		}
		else {
			System.debug('##################################################');
		}
		//System.assert(integracao != null);
		//System.assert(integracao.UltimaExecucao__c <= System.now());
		//List<RamoSeguro__c> dados = [SELECT Id, Name, Codigo__c, Empresa__r.CodigoEmpresa__c, IdExterno__c, Status__c FROM RamoSeguro__c WHERE Status__c = 'Em an√°lise'];
		//System.assertEquals(dados.size(), 2);
	}

/*
	@isTest
	static void testarErroSincronizacao() {
		String responseJsonString = '';

		Test.setMock(HttpCalloutMock.class, new MockHttpResponse(responseJsonString, 500, 'OK'));
		Test.startTest();

		try {
			IntegracaoBO.getInstance().executarIntegracao(RamoSeguro__c.sObjectType.getDescribe().getName());
		}
		catch(Exception e) {
			System.assertEquals('Erro ao buscar ramos de seguro.', e.getMessage());
		}

		String nomeObjeto = RamoSeguro__c.sObjectType.getDescribe().getName();
		Integracao__c integracao = [SELECT Id, Name, UltimaExecucao__c FROM Integracao__c WHERE DeveloperName__c =: nomeObjeto LIMIT 1];

		Test.stopTest();
	}
*/

	/*@isTest
	static void testeBotaoExecutarIntegracao() {
		String nomeObjeto = Account.sObjectType.getDescribe().getName();
		System.debug('::: nomeObjeto: ' + nomeObjeto);
		Integracao__c integracao = [SELECT Id, Name, UltimaExecucao__c FROM Integracao__c WHERE DeveloperName__c =: nomeObjeto LIMIT 1];
		Map<String, Object> resposta = AcaoBotaoExecutarIntegracao.executarIntegracao(integracao.Id);
		//System.assertEquals(resposta.success, true);

		try {
			Dashboard dash = DashboardBO.getInstance().buscarDashboardIntegracao();
		}
		catch(Exception e) {
			System.debug('### ' + e.getLineNumber() + ': ' + e.getMessage());
		}
	}*/
}